<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Desi Secret | ‡§¶‡•á‡§∏‡•Ä ‡§∏‡•á‡§ï‡•ç‡§∏ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å, ‡§≠‡§æ‡§≠‡•Ä ‡§¶‡•á‡§µ‡§∞ ‡§ï‡•Ä ‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§ü‡§ø‡§ï ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="‡§∞‡§ø‡§Ø‡§≤ ‡§≤‡§æ‡§á‡§´ ‡§∏‡•á‡§ï‡•ç‡§∏ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç, ‡§≠‡§æ‡§à ‡§¨‡§π‡§® ‡§ï‡•Ä ‡§∏‡•á‡§ï‡•ç‡§∏ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä, ‡§≠‡§æ‡§≠‡•Ä ‡§¶‡•á‡§µ‡§∞ ‡§ï‡•Ä ‡§ï‡§π‡§æ‡§®‡•Ä, ‡§¨‡§æ‡§•‡§∞‡•Ç‡§Æ ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∏‡•Ä ‡§Æ‡§∏‡•ç‡§§‡•Ä, ‡§î‡§∞ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§è‡§°‡§≤‡•ç‡§ü ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä‡§ú‡§º ‡§™‡§¢‡§º‡•á‡§Ç‡•§">
  <meta name="keywords" content="‡§¶‡•á‡§∏‡•Ä ‡§∏‡•á‡§ï‡•ç‡§∏ ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å, ‡§≠‡§æ‡§à ‡§¨‡§π‡§® ‡§ï‡•Ä ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§∏‡•á‡§ï‡•ç‡§∏ ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä, ‡§≠‡§æ‡§≠‡•Ä ‡§¶‡•á‡§µ‡§∞ ‡§ï‡•Ä ‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§ü‡§ø‡§ï ‡§ï‡§π‡§æ‡§®‡•Ä, ‡§∏‡§æ‡§≤‡•Ä ‡§ú‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∞‡•ã‡§Æ‡§æ‡§Ç‡§ö, ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§è‡§°‡§≤‡•ç‡§ü ‡§∏‡•ç‡§ü‡•ã‡§∞‡•Ä‡§ú‡§º">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #ffe5cc;
      color: #333;
      text-align: center;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 0 20px;
    }
    header {
      background: #800000;
      color: white;
      padding: 20px 10px 10px;
    }
    header h1 {
      font-size: 26px;
      margin: 5px 0;
    }
    header p {
      margin: 0;
      font-size: 14px;
      color: #ffcccb;
    }
    nav {
      background: #b22222;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      flex-wrap: wrap;
    }
    nav button {
      background: transparent;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    .dropdown {
      display: none;
      background: #fff;
      color: #000;
      border: 1px solid #ccc;
      position: absolute;
      top: 100%;
      left: 10px;
      width: 200px;
      text-align: left;
      z-index: 10;
    }
    .dropdown a {
      display: block;
      padding: 10px 12px;
      text-decoration: none;
      color: #000;
      background: #f0f0f0;
      cursor: pointer;
    }
    .dropdown a:hover {
      background: #ddd;
    }
    main {
      padding: 30px 0;
    }
    #stories h3 {
      margin-bottom: 5px;
    }
    #stories > div {
      margin-bottom: 25px;
    }
    #pagination {
      margin: 20px 0;
    }
    #pagination button {
      margin: 2px;
      padding: 6px 10px;
      cursor: pointer;
    }
    #searchBox {
      margin: 30px auto 10px;
      padding: 10px;
      width: 80%;
      max-width: 400px;
      display: block;
      border-radius: 5px;
      border: 1px solid #aaa;
      font-size: 16px;
    }
    a {
      text-decoration: none;
      color: maroon;
    }
    hr {
      border: none;
      border-top: 1px solid #aaa;
      margin: 10px 0 20px;
    }
    footer {
      background: #800000;
      color: white;
      padding: 20px;
      margin-top: 40px;
      font-size: 14px;
    }
    footer a {
      color: #ffcccb;
      text-decoration: underline;
      margin: 0 10px;
    }
    @media (max-width: 600px) {
      nav {
        flex-direction: column;
        align-items: flex-start;
      }
      nav button, .dropdown {
        width: 100%;
      }
      .dropdown {
        position: static;
        border: none;
        box-shadow: none;
      }
      body {
        font-size: 14px;
      }
      header h1 {
        font-size: 20px;
      }
      header p {
        font-size: 12px;
      }
      nav button {
        font-size: 14px;
      }
      #searchBox {
        font-size: 14px;
      }
      #stories h3 {
        font-size: 16px;
      }
      #stories p {
        font-size: 13px;
      }
      footer {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>

<header>
  <p>Best Indian Sex Stories, Desi Chudai, Indian Porn Stories</p>
  <h1>My Desi Secret</h1>
</header>

<nav>
  <button onclick="toggleDropdown()">üìÇ Categories</button>
  <div id="dropdown" class="dropdown">
    <a data-category="Brother Sister">Brother Sister</a>
    <a data-category="Bhabhi">Bhabhi</a>
    <a data-category="Teacher">Teacher</a>
    <a data-category="Incest">Incest</a>
    <a data-category="First Time">First Time</a>
    <a data-category="Romance">Romance</a>
  </div>
  <button onclick="window.location.href='submit.html'">‚úçÔ∏è Submit Your Story</button>
</nav>

<main class="container">
  <p style="margin-top: 30px;">
    Welcome to My Desi Secret. Read and submit your wildest fantasies in Hindi.
  </p>

  <input type="text" id="searchBox" placeholder="Search stories...">
  <div id="stories"></div>
  <div id="pagination"></div>
</main>

<footer>
  <p>¬© 2025 My Desi Secret | All stories are fictional and meant for entertainment only.</p>
  <p>
    <a href="submit.html">‚úçÔ∏è Submit Story</a> |
    <a href="privacy.html">üîí Privacy Policy</a> |
    <a href="contact.html">üìß Contact</a>
  </p>
</footer>

<script>
  function toggleDropdown() {
    const drop = document.getElementById("dropdown");
    drop.style.display = (drop.style.display === "block") ? 'none' : 'block';
  }

  window.onclick = function (e) {
    if (!e.target.matches("button") && !e.target.matches("a")) {
      const drop = document.getElementById("dropdown");
      if (drop.style.display === "block") {
        drop.style.display = "none";
      }
    }
  };

  const storyContainer = document.getElementById("stories");
  const searchBox = document.getElementById("searchBox");
  const paginationContainer = document.getElementById("pagination");

  let allStories = [];
  let currentPage = 1;
  const storiesPerPage = 8;

  fetch("stories1.json")
    .then(res => res.json())
    .then(data => {
      allStories = data.sort(() => 0.5 - Math.random());
      renderPaginatedStories(allStories, currentPage);

      searchBox.addEventListener("input", () => {
        const keyword = searchBox.value.toLowerCase();
        const filtered = allStories.filter(story =>
          story.title.toLowerCase().includes(keyword) ||
          (story.description && story.description.toLowerCase().includes(keyword))
        );
        currentPage = 1;
        renderPaginatedStories(filtered, currentPage);
      });

      document.querySelectorAll(".dropdown a").forEach(link => {
        link.addEventListener("click", () => {
          const category = link.getAttribute("data-category");
          const filtered = allStories.filter(story => story.category === category);
          currentPage = 1;
          renderPaginatedStories(filtered, currentPage);
        });
      });
    })
    .catch(err => {
      console.error("Failed to load stories:", err);
      storyContainer.innerHTML = "<p style='color: red;'>Failed to load stories. Check if stories1.json exists.</p>";
    });

  function renderPaginatedStories(stories, page) {
    const start = (page - 1) * storiesPerPage;
    const end = start + storiesPerPage;
    const paginated = stories.slice(start, end);
    renderStories(paginated);
    renderPaginationControls(stories.length, page);
  }

  function renderStories(stories) {
    storyContainer.innerHTML = "";
    if (stories.length === 0) {
      storyContainer.innerHTML = "<p>No stories found.</p>";
      return;
    }

    stories.forEach(story => {
      const div = document.createElement("div");
      const title = document.createElement("h3");
      const link = document.createElement("a");
      link.href = "stories/" + story.id + ".html"; // ‚úÖ Fixed link
      link.textContent = story.title;
      link.target = "_blank";
      title.appendChild(link);

      const meta = document.createElement("p");
      meta.innerHTML = `By <b>${story.author}</b> | Category: ${story.category}`;
      div.appendChild(title);
      div.appendChild(meta);

      if (story.description) {
        const desc = document.createElement("p");
        desc.textContent = story.description;
        div.appendChild(desc);
      }

      div.innerHTML += "<hr>";
      storyContainer.appendChild(div);
    });
  }

  function renderPaginationControls(totalItems, currentPage) {
    paginationContainer.innerHTML = "";
    const totalPages = Math.ceil(totalItems / storiesPerPage);
    if (totalPages <= 1) return;

    for (let i = 1; i <= totalPages; i++) {
      const btn = document.createElement("button");
      btn.textContent = i;

      if (i === currentPage) {
        btn.style.fontWeight = "bold";
        btn.style.background = "#b22222";
        btn.style.color = "white";
      }

      btn.addEventListener("click", () => {
        renderPaginatedStories(allStories, i);
        currentPage = i;
      });

      paginationContainer.appendChild(btn);
    }
  }
</script>

</body>
</html>
